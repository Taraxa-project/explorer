{"ast":null,"code":"import config from 'config';\nimport mongoose from 'mongoose';\nimport Tx from '../../../models/tx';\nexport default async function userHandler(req, res) {\n  try {\n    mongoose.connection._readyState || (await mongoose.connect(config.mongo.uri, config.mongo.options));\n  } catch (e) {\n    console.error(e);\n    return res.status(500).json({\n      error: 'Internal error. Please try your request again.'\n    });\n  }\n\n  const {\n    query: {\n      id\n    },\n    method\n  } = req;\n\n  switch (method) {\n    case 'GET':\n      try {\n        const tx = await Tx.findOne({\n          _id: id\n        });\n\n        if (tx) {\n          return res.json(tx);\n        }\n\n        return res.status(404).json({\n          error: 'Not found'\n        });\n      } catch (e) {\n        console.error(e);\n        res.status(500).json({\n          error: 'Internal error. Please try your request again.'\n        });\n      }\n\n      break;\n\n    default:\n      res.setHeader('Allow', ['GET']);\n      res.status(405).end(`Method ${method} Not Allowed`);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}